<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>Entity - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Entity.html">Entity</a><ul class='methods'><li data-type='method'><a href="Entity.html#_execQuery">_execQuery</a></li><li data-type='method'><a href="Entity.html#_initClient">_initClient</a></li><li data-type='method'><a href="Entity.html#_initParams">_initParams</a></li></ul></li><li><a href="SimpleEntity.html">SimpleEntity</a><ul class='methods'><li data-type='method'><a href="SimpleEntity.html#create">create</a></li><li data-type='method'><a href="SimpleEntity.html#delete">delete</a></li><li data-type='method'><a href="SimpleEntity.html#list">list</a></li><li data-type='method'><a href="SimpleEntity.html#lookup">lookup</a></li><li data-type='method'><a href="SimpleEntity.html#update">update</a></li></ul></li></ul><h3>Externals</h3><ul><li><a href="external-DynamoDbClient.html">DynamoDbClient</a></li><li><a href="external-ErrorTypes.html">ErrorTypes</a></li><li><a href="external-Logger.html">Logger</a></li><li><a href="external-SelectiveCopy.html">SelectiveCopy</a></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<div id="main">
    
    <h1 class="page-title">Entity</h1>
    

    




<section>

<header>
    
        <h2>
        Entity
        </h2>
        
            <div class="class-description">Abstract representation of a single DynamoDB table that is designed to be
extended by child classes. This class provides the following features:
<ul>

<li>
This class is intended to serve as a base class for specialized entity
classes that will implement multiple properties on the base class, including,
but not limited to <a href="Entity.html#tableName"><b>tableName</b></a>,
<a href="Entity.html#hashKeyName"><b>hashKeyName</b></a>,
<a href="Entity.html#rangeKeyName"><b>rangeKeyName</b></a> (optional),
<a href="Entity.html#_updateCopier"><b>_updateCopier</b></a>, and
<a href="Entity.html#_deleteCopier"><b>_deleteCopier</b></a>.
</li>

<li> Provides utility methods for key validation, initialization of a
DynamoDB client object, and execution of queries</li>

</ul></div>
        
    
</header>

<article>
    
        <div class="container-overview">
        
            

    
    <h2>Constructor</h2>
    

    <h4 class="name" id="Entity"><span class="type-signature"></span>new Entity<span class="signature">(options<span class="signature-attributes">opt</span>)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="entity.js.html">entity.js</a>, <a href="entity.js.html#line146">line 146</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>















    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="global.html#EntityOptions">EntityOptions</a></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>{}</code>
                
                </td>
            

            <td class="description last">An options object that contains
       useful references for use within the entity.</td>
        </tr>

    
    </tbody>
</table>



















        
        </div>
    

    

    

    
    
    

     

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id="_deleteCopier"><span class="type-signature">(protected) </span>_deleteCopier<span class="type-signature"> :<a href="external-SelectiveCopy.html">external:SelectiveCopy</a></span></h4>





<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="entity.js.html">entity.js</a>, <a href="entity.js.html#line405">line 405</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    The copier object for delete operations. This is a reference to an
instance of the <a href="external-SelectiveCopy.html">external:SelectiveCopy</a> class that has been
initialized with the fields that will be copied from the input payload
to the entity record, in effect serving as a filter for fields that can
be deleted.
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type"><a href="external-SelectiveCopy.html">external:SelectiveCopy</a></span>


        </li>
    </ul>






        
            
<h4 class="name" id="_logger"><span class="type-signature">(protected) </span>_logger<span class="type-signature"> :Object</span></h4>





<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="entity.js.html">entity.js</a>, <a href="entity.js.html#line415">line 415</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    The logger object associated with the entity.
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">Object</span>


        </li>
    </ul>






        
            
<h4 class="name" id="_updateCopier"><span class="type-signature">(protected) </span>_updateCopier<span class="type-signature"> :<a href="external-SelectiveCopy.html">external:SelectiveCopy</a></span></h4>





<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="entity.js.html">entity.js</a>, <a href="entity.js.html#line391">line 391</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    The copier object for update operations. This is a reference to an
instance of the <a href="external-SelectiveCopy.html">external:SelectiveCopy</a> class that has been
initialized with the fields that will be copied from the input payload
to the entity record, in effect serving as a filter for fields that can
be updated.
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type"><a href="external-SelectiveCopy.html">external:SelectiveCopy</a></span>


        </li>
    </ul>






        
            
<h4 class="name" id="hashKeyName"><span class="type-signature"></span>hashKeyName<span class="type-signature"> :String</span></h4>





<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="entity.js.html">entity.js</a>, <a href="entity.js.html#line433">line 433</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    The name of the dynamodb hash key for the current entity.
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">String</span>


        </li>
    </ul>






        
            
<h4 class="name" id="rangeKeyName"><span class="type-signature"></span>rangeKeyName<span class="type-signature"> :String</span></h4>





<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="entity.js.html">entity.js</a>, <a href="entity.js.html#line442">line 442</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    The name of the dynamodb range key for the current entity.
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">String</span>


        </li>
    </ul>






        
            
<h4 class="name" id="tableName"><span class="type-signature"></span>tableName<span class="type-signature"> :String</span></h4>





<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="entity.js.html">entity.js</a>, <a href="entity.js.html#line424">line 424</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    The name of the dynamodb table associated with this entity.
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">String</span>


        </li>
    </ul>






        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name" id="_execQuery"><span class="type-signature">(protected) </span>_execQuery<span class="signature">(query, logger<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="entity.js.html">entity.js</a>, <a href="entity.js.html#line353">line 353</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    Executes a query action, and returns the results of the query. If the
query throws an error, it will be mapped to a standard set of errors.
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>query</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="global.html#EntityQuery">EntityQuery</a></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">The query to execute.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>logger</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="external-Logger.html">external:Logger</a></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>this._logger</code>
                
                </td>
            

            <td class="description last">Reference to a logger
       object. If omitted, the default instance logger will be used.</td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    A promise that will be rejected or resolved based on
        the outcome of the operation.
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="_initClient"><span class="type-signature">(protected) </span>_initClient<span class="signature">(hashKey<span class="signature-attributes">opt</span>, rangeKey<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {external:DynamoDBClient}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="entity.js.html">entity.js</a>, <a href="entity.js.html#line324">line 324</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    Initializes and returns the dynamodb client. The client is created, and
associated with the table for this entity. All subsequent configuration
must be done elsewhere.
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>hashKey</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>
|

<span class="param-type">Number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">If specified, injects a where
       clause for the entity's hash key.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>rangeKey</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>
|

<span class="param-type">Number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">If specified, injects a where
       clause for the entity's range key.</td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    A properly initialized client object.
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">external:DynamoDBClient</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="_initParams"><span class="type-signature">(protected) </span>_initParams<span class="signature">(keys, operation, audit<span class="signature-attributes">opt</span>, rangeKeyOptional<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {<a href="global.html#EntityParams">EntityParams</a>}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="entity.js.html">entity.js</a>, <a href="entity.js.html#line291">line 291</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    Validates and extracts core parameters required for dynamodb operations.
This includes validation/extraction of hash and range key, determination
of the username to associate with the operation, and a logger object
pre initialized with appropriate metaadata.
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>keys</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="global.html#EntityKeys">EntityKeys</a></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">An object containing the hash (and optionally
       the range key) for the entity.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>operation</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">An operation name that will be used to tag log
       messages.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>audit</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="global.html#EntityAudit">EntityAudit</a></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">An audit object containing audit logging
       information.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>rangeKeyOptional</code></td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>false</code>
                
                </td>
            

            <td class="description last">A boolean parameter that
       indicates that the range key is optional. If this value is set to
       true, no error will be thrown if the range key is undefined in the
       keys object.</td>
        </tr>

    
    </tbody>
</table>














<h5>Throws:</h5>

        

<dl>
    <dt>
        <div class="param-desc">
        An ArgError will be thrown if the keys are
        invalid.
        </div>
    </dt>
    <dd></dd>
    <dt>
        <dl class="param-type">
            <dt>
                Type
            </dt>
            <dd>
                
<span class="param-type"><a href="external-ErrorTypes.html">external:ErrorTypes</a></span>


            </dd>
        </dl>
    </dt>
    <dd></dd>
</dl>


    


<h5>Returns:</h5>

        
<div class="param-desc">
    A key value pair containing the parameters.
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="global.html#EntityParams">EntityParams</a></span>


    </dd>
</dl>

    



        
    

    

    
</article>

</section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.3</a> on Tue Jan 14 2020 10:18:17 GMT-0500 (Eastern Standard Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>